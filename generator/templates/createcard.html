{% extends "base.html" %}

{% block title %}Create your e-card{% endblock %}

{% block htmlhead %}
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.3.2/jquery.min.js"></script>

<script type="text/javascript">


$(document).ready(function() { 
		
				
		$('#message_field textarea').keyup( function() {
			$('#message').text($(this).val());
		});
		
		$('#fromname_field input').keyup( function() {
			$('#name').html($(this).val());
		});
		
		$('#fromemail_field input').keyup( function() {
			$('#email').html($(this).val());
		});
		
		
		$('#typeface_field label').click( function() {
			$('#message').css('font-family', $(this).css('font-family'));
		})
		
		$('#picture_field label').click( function() {
			$('#picture').attr('src', $(this).find('img').attr('rel'))
		})
	
		$('#border_field label').click( function() {
			$('#border').attr('src', $(this).find('img').attr('rel'))
		})

		
});


</script>

<style type="text/css">

#cardpreview{ border: 1px solid lightblue; padding: 30px;}

</style>

{% endblock %}

{% block content %}
		
	<form action="" method="POST">
    <div class="fieldWrapper" id="picture_field">
        {{ form.picture.errors }}
        <label for="id_picture">Pick your picture:</label>
        
        <ul>
        {% for item in picture_list %}
		<li><label for="id_picture_{{ forloop.counter0 }}"><input type="radio" id="id_picture_{{ forloop.counter0 }}" value="{{ forloop.counter }}" name="picture">{{ item }} <img src="{{ item.thumb.url }}" rel="{{ item.full.url }}"></label></li>
		{% endfor %}
		</ul>
        
		
        
    </div>
    <div class="fieldWrapper" id="border_field">
        {{ form.border.errors }}
        <label for="id_border">Pick a bow:</label>
        
        <ul>
        {% for item in border_list %}
		<li><label for="id_border_{{ forloop.counter0 }}"><input type="radio" id="id_border_{{ forloop.counter0 }}" value="{{ forloop.counter }}" name="border">{{ item }} <img src="{{ item.thumb.url }}" rel="{{ item.thumb.url }}"></label></li>
		{% endfor %}
		</ul>
    </div>
    <div class="fieldWrapper" id="message_field">
        {{ form.message.errors }}
        <label for="id_message">Your message:</label><br>
        {{ form.message }}
    </div>
    <div class="fieldWrapper" id="typeface_field">
        {{ form.typeface.errors }}
        <label for="id_typeface">Choose a font:</label>
        
        <ul>
        {% for item in typeface_list %}
		<li><label for="id_typeface_{{ forloop.counter0 }}" style="font-family:{{ item.fontstack|safe }}"><input type="radio" id="id_typeface_{{ forloop.counter0 }}" value="{{ forloop.counter }}" name="typeface">{{ item }}</label></li>
		{% endfor %}
		</ul>
        
    </div>
    <div class="fieldWrapper" id="toemail_field">
        {{ form.toemail.errors }}
        <label for="id_toemail">Your recipient's e-mail:</label>
        {{ form.toemail }}
    </div>
    <div class="fieldWrapper" id="fromemail_field">
        {{ form.fromemail.errors }}
        <label for="id_fromemail">Your e-mail:</label>
        {{ form.fromemail }}
    </div>
    <div class="fieldWrapper" id="fromname_field">
        {{ form.fromname.errors }}
        <label for="id_fromname">Your name:</label>
        {{ form.fromname }}
    </div>
 
 
 <p>&nbsp;</p>
 
 <fieldset id="cardpreview">
 <legend><h2>Live Preview</h2></legend>
 	<img id="picture" src="{{ mediaurl }}clear.gif">
	
	<div id="message">
	</div>
	
	<img id="border" src="{{ mediaurl }}clear.gif">
	
	<p id="from">From <span id="name"></span><br>
	<span id="email"></span>	
	</p>
 </fieldset>


   <p><input type="submit" value="Send Card" /></p>

</form>

{% endblock %}